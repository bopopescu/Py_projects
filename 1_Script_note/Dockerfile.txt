# Test stage
FROM alpine AS test
LABEL application=todobackend

# Install basic utilities
RUN apk add --no-cache bash git

# Install build dependencies
RUN apk add --no-cache gcc python3-dev libffi-dev musl-dev linux-headers mariadb-dev
RUN pip3 install wheel -U

# Copy requirements
COPY /src/requirements* /build/
WORKDIR /build

# Build and install requirements
RUN pip3 wheel -r requirements_test.txt --no-cache-dir --no-input
RUN pip3 install -r requirements_test.txt -f /build --no-index --no-cache-dir

# Copy source code
COPY /src /app
WORKDIR /app

# Test entrypoint
CMD ["python3", "manage.py", "test", "--noinput", "--settings=todobackend.settings_test"]

#_______________________________________________________________
docker build --target test -t todobackend-test .
todobackend>  docker run -it --rm todobackend-test

#######################################################################################
# @@ Release stage
FROM alpine
LABEL application=todobackend

# Install operating system dependencies
RUN apk add --no-cache python3 mariadb-client bash curl bats jq

# Create app user
RUN addgroup -g 1000 app && \
    adduser -u 1000 -G app -D app

# Copy and install application source and pre-built dependencies
COPY --from=test --chown=app:app /build /build
COPY --from=test --chown=app:app /app /app
RUN pip3 install -r /build/requirements.txt -f /build --no-index --no-cache-dir
RUN rm -rf /build

# Create public volume
RUN mkdir /public
RUN chown app:app /public
VOLUME /public

# Set working directory and application user
WORKDIR /app
USER app

#__________________________________________
dockerfile FROM debian:jessie

MAINTAINER Daniel Alan Miller dalanmiller@rethinkdb.com

RUN apt-key adv --keyserver pgp.mit.edu --recv-keys 1614552E5765227AEC39EFCFA7E00EF33A8F2399 RUN echo "deb http://download.rethinkdb.com/apt jessie main" > /etc/apt/sources.list.d/rethinkdb.list

ENV RETHINKDBPACKAGEVERSION 2.0.4~0jessie

RUN apt-get update 
apt-get install -y rethinkdb=$RETHINKDBPACKAGEVERSION 
rm -rf /var/lib/apt/lists/*

VOLUME ["/data"]

WORKDIR /data

CMD ["rethinkdb", "--bind", "all"]

EXPOSE 28015 29015 8080


# sudo usermod -aG docker $USER
# &&___________________________________________________________________________________________________________


3 directories, 7 files
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ clear
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ tree -L 2
.
├── Dockerfile
├── ex_Dockerfile_example.txt
├── README.md
└── src
├── acceptance.bats
├── manage.py
├── requirements_test.txt
├── requirements.txt
├── todo
└── todobackend

# @@docker build test image
3 directories, 7 files
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ docker build --target test -t todobackend-test .
ERRO[0000] failed to dial gRPC: cannot connect to the Docker daemon. Is 'docker daemon' running on this host?: dial unix /var/run/docker.sock: connect: permission denied
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.40/build?buildargs=%7B%7D&cachefrom=%5B%5D&cgroupparent=&cpuperiod=0&cpuquota=0&cpusetcpus=&cpusetmems=&cpushares=0&dockerfile=Dockerfile&labels=%7B%7D&memory=0&memswap=0&networkmode=default&rm=1&session=41kqbw3mapp97fjqj0zv6nx5b&shmsize=0&t=todobackend-test&target=test&ulimits=null&version=1: dial unix /var/run/docker.sock: connect: permission denied
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ docker build --target test -t todobackend-test .
ERRO[0000] failed to dial gRPC: cannot connect to the Docker daemon. Is 'docker daemon' running on this host?: dial unix /var/run/docker.sock: connect: permission denied
error during connect: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.40/build?buildargs=%7B%7D&cachefrom=%5B%5D&cgroupparent=&cpuperiod=0&cpuquota=0&cpusetcpus=&cpusetmems=&cpushares=0&dockerfile=Dockerfile&labels=%7B%7D&memory=0&memswap=0&networkmode=default&rm=1&session=n47ny41ulso520wxqq6y89dn1&shmsize=0&t=todobackend-test&target=test&ulimits=null&version=1: context canceled
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ clear
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ sudo docker build --target test -t todobackend-test .
[sudo] password for ssqa:
Sending build context to Docker daemon  40.45kB
Step 1/12 : FROM alpine AS test
latest: Pulling from library/alpine
9d48c3bd43c5: Pull complete
Digest: sha256:72c42ed48c3a2db31b7dafe17d275b634664a708d901ec9fd57b1529280f01fb
Status: Downloaded newer image for alpine:latest
---> 961769676411
Step 2/12 : LABEL application=todobackend
---> Running in 73c708642fe9
Removing intermediate container 73c708642fe9
---> 27c350f22511
Step 3/12 : RUN apk add --no-cache bash git
---> Running in 516bd2033b23
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz
(1/11) Installing ncurses-terminfo-base (6.1_p20190518-r0)
(2/11) Installing ncurses-terminfo (6.1_p20190518-r0)
(3/11) Installing ncurses-libs (6.1_p20190518-r0)
(4/11) Installing readline (8.0.0-r0)
(5/11) Installing bash (5.0.0-r0)
Executing bash-5.0.0-r0.post-install
(6/11) Installing ca-certificates (20190108-r0)
(7/11) Installing nghttp2-libs (1.39.2-r0)
(8/11) Installing libcurl (7.66.0-r0)
(9/11) Installing expat (2.2.8-r0)
(10/11) Installing pcre2 (10.33-r0)
(11/11) Installing git (2.22.0-r0)
Executing busybox-1.30.1-r2.trigger
Executing ca-certificates-20190108-r0.trigger
OK: 30 MiB in 25 packages
Removing intermediate container 516bd2033b23
---> 8071d5389dae
Step 4/12 : RUN apk add --no-cache gcc python3-dev libffi-dev musl-dev linux-headers mariadb-dev
---> Running in 4a53172ab4dc
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz
(1/32) Upgrading libcrypto1.1 (1.1.1c-r0 -> 1.1.1d-r0)
(2/32) Upgrading libssl1.1 (1.1.1c-r0 -> 1.1.1d-r0)
(3/32) Installing binutils (2.32-r0)
(4/32) Installing gmp (6.1.2-r1)
(5/32) Installing isl (0.18-r0)
(6/32) Installing libgomp (8.3.0-r0)
(7/32) Installing libatomic (8.3.0-r0)
(8/32) Installing libgcc (8.3.0-r0)
(9/32) Installing mpfr3 (3.1.5-r1)
(10/32) Installing mpc1 (1.1.0-r0)
(11/32) Installing libstdc++ (8.3.0-r0)
(12/32) Installing gcc (8.3.0-r0)
(13/32) Installing linux-headers (4.19.36-r0)
(14/32) Installing libffi (3.2.1-r6)
(15/32) Installing pkgconf (1.6.1-r1)
(16/32) Installing libffi-dev (3.2.1-r6)
(17/32) Installing openssl-dev (1.1.1d-r0)
(18/32) Installing zlib-dev (1.2.11-r1)
(19/32) Installing mariadb-connector-c (3.0.10-r0)
(20/32) Installing mariadb-connector-c-dev (3.0.10-r0)
(21/32) Installing mariadb-common (10.3.17-r0)
(22/32) Installing libaio (0.3.111-r0)
(23/32) Installing xz-libs (5.2.4-r0)
(24/32) Installing pcre (8.43-r0)
(25/32) Installing mariadb-embedded (10.3.17-r0)
(26/32) Installing mariadb-dev (10.3.17-r0)
(27/32) Installing musl-dev (1.1.22-r3)
(28/32) Installing libbz2 (1.0.6-r7)
(29/32) Installing gdbm (1.13-r1)
(30/32) Installing sqlite-libs (3.28.0-r0)
(31/32) Installing python3 (3.7.3-r0)
(32/32) Installing python3-dev (3.7.3-r0)
Executing busybox-1.30.1-r2.trigger
Executing ca-certificates-20190108-r0.trigger
OK: 274 MiB in 55 packages
Removing intermediate container 4a53172ab4dc
---> b8511ea6066f
Step 5/12 : RUN pip3 install wheel -U
---> Running in 8455349dfba8
Collecting wheel
Downloading https://files.pythonhosted.org/packages/00/83/b4a77d044e78ad1a45610eb88f745be2fd2c6d658f9798a15e384b7d57c9/wheel-0.33.6-py2.py3-none-any.whl
Installing collected packages: wheel
Successfully installed wheel-0.33.6
You are using pip version 19.0.3, however version 19.2.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Removing intermediate container 8455349dfba8
---> 85d760de343f
Step 6/12 : COPY /src/requirements* /build/
---> 9f47a6a226bb
Step 7/12 : WORKDIR /build
---> Running in 042f39cb2b90
Removing intermediate container 042f39cb2b90
---> 2ffc2795ccef
Step 8/12 : RUN pip3 wheel -r requirements_test.txt --no-cache-dir --no-input
---> Running in 8919d82121c7
Collecting Django==2.0 (from -r requirements.txt (line 1))
Downloading https://files.pythonhosted.org/packages/44/98/35b935a98a17e9a188efc2d53fc51ae0c8bf498a77bc224f9321ae5d111c/Django-2.0-py3-none-any.whl (7.1MB)
Saved ./Django-2.0-py3-none-any.whl
Collecting django-cors-headers==2.1.0 (from -r requirements.txt (line 2))
Downloading https://files.pythonhosted.org/packages/10/97/40b519badff93449706cd2cab3f328e1898e627bb218e3429c5581ad1932/django_cors_headers-2.1.0-py2.py3-none-any.whl
Saved ./django_cors_headers-2.1.0-py2.py3-none-any.whl
Collecting djangorestframework==3.7.3 (from -r requirements.txt (line 3))
Downloading https://files.pythonhosted.org/packages/f5/2c/3c3c81b8ecd60952c20ccd5fc1d19c0b22731c80c75649dd2e3fef361aaf/djangorestframework-3.7.3-py2.py3-none-any.whl (1.5MB)
Saved ./djangorestframework-3.7.3-py2.py3-none-any.whl
Collecting mysql-connector-python==8.0.11 (from -r requirements.txt (line 4))
Downloading https://files.pythonhosted.org/packages/0f/07/53d129764f4b9e7eda2a8f10474b710a2c4986571a73b6345271b7b94eb0/mysql_connector_python-8.0.11-py2.py3-none-any.whl (318kB)
Saved ./mysql_connector_python-8.0.11-py2.py3-none-any.whl
Collecting pytz==2017.3 (from -r requirements.txt (line 5))
Downloading https://files.pythonhosted.org/packages/a3/7f/e7d1acbd433b929168a4fb4182a2ff3c33653717195a26c1de099ad1ef29/pytz-2017.3-py2.py3-none-any.whl (511kB)
Saved ./pytz-2017.3-py2.py3-none-any.whl
Collecting uwsgi==2.0.17 (from -r requirements.txt (line 6))
Downloading https://files.pythonhosted.org/packages/98/b2/19b34b20662d111f7d2f926cdf10e13381761dd7dbd10666b9076cbdcd22/uwsgi-2.0.17.tar.gz (798kB)
Collecting colorama==0.3.9 (from -r requirements_test.txt (line 2))
Downloading https://files.pythonhosted.org/packages/db/c8/7dcf9dbcb22429512708fe3a547f8b6101c0d02137acbd892505aee57adf/colorama-0.3.9-py2.py3-none-any.whl
Saved ./colorama-0.3.9-py2.py3-none-any.whl
Collecting coverage==4.4.2 (from -r requirements_test.txt (line 3))
Downloading https://files.pythonhosted.org/packages/0b/e1/190ef1a264144c9b073b7353c259ca5431b5ddc8861b452e858fcbd0e9de/coverage-4.4.2.tar.gz (374kB)
Collecting django-nose==1.4.5 (from -r requirements_test.txt (line 4))
Downloading https://files.pythonhosted.org/packages/06/2c/22cd461bb388f91b807e571d49024ef69157da7a29614739c2ccb881b171/django_nose-1.4.5-py2.py3-none-any.whl
Saved ./django_nose-1.4.5-py2.py3-none-any.whl
Collecting nose==1.3.7 (from -r requirements_test.txt (line 5))
Downloading https://files.pythonhosted.org/packages/15/d8/dd071918c040f50fa1cf80da16423af51ff8ce4a0f2399b7bf8de45ac3d9/nose-1.3.7-py3-none-any.whl (154kB)
Saved ./nose-1.3.7-py3-none-any.whl
Collecting pinocchio==0.4.2 (from -r requirements_test.txt (line 6))
Downloading https://files.pythonhosted.org/packages/8f/4e/6656705e951d7e115c6bae2e26ea943af1c984ea7d155a91b20723a09f27/pinocchio-0.4.2.tar.gz
Collecting protobuf>=3.0.0 (from mysql-connector-python==8.0.11->-r requirements.txt (line 4))
Downloading https://files.pythonhosted.org/packages/94/42/d344c5690aa3e8ef6b3b3b8e3d55f0eb0fef7d2f59b76d6fb013f1a796f7/protobuf-3.9.2-py2.py3-none-any.whl (431kB)
Saved ./protobuf-3.9.2-py2.py3-none-any.whl
Collecting setuptools (from protobuf>=3.0.0->mysql-connector-python==8.0.11->-r requirements.txt (line 4))
Downloading https://files.pythonhosted.org/packages/b2/86/095d2f7829badc207c893dd4ac767e871f6cd547145df797ea26baea4e2e/setuptools-41.2.0-py2.py3-none-any.whl (576kB)
Saved ./setuptools-41.2.0-py2.py3-none-any.whl
Collecting six>=1.9 (from protobuf>=3.0.0->mysql-connector-python==8.0.11->-r requirements.txt (line 4))
Downloading https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl
Saved ./six-1.12.0-py2.py3-none-any.whl
Skipping Django, due to already being wheel.
Skipping django-cors-headers, due to already being wheel.
Skipping djangorestframework, due to already being wheel.
Skipping mysql-connector-python, due to already being wheel.
Skipping pytz, due to already being wheel.
Skipping colorama, due to already being wheel.
Skipping django-nose, due to already being wheel.
Skipping nose, due to already being wheel.
Skipping protobuf, due to already being wheel.
Skipping setuptools, due to already being wheel.
Skipping six, due to already being wheel.
Building wheels for collected packages: uwsgi, coverage, pinocchio
Building wheel for uwsgi (setup.py): started
Building wheel for uwsgi (setup.py): finished with status 'done'
Stored in directory: /build
Building wheel for coverage (setup.py): started
Building wheel for coverage (setup.py): finished with status 'done'
Stored in directory: /build
Building wheel for pinocchio (setup.py): started
Building wheel for pinocchio (setup.py): finished with status 'done'
Stored in directory: /build
Successfully built uwsgi coverage pinocchio
You are using pip version 19.0.3, however version 19.2.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Removing intermediate container 8919d82121c7
---> d67d27b9a2ab
Step 9/12 : RUN pip3 install -r requirements_test.txt -f /build --no-index --no-cache-dir
---> Running in 0de7ae835571
Looking in links: /build
Collecting Django==2.0 (from -r requirements.txt (line 1))
Collecting django-cors-headers==2.1.0 (from -r requirements.txt (line 2))
Collecting djangorestframework==3.7.3 (from -r requirements.txt (line 3))
Collecting mysql-connector-python==8.0.11 (from -r requirements.txt (line 4))
Collecting pytz==2017.3 (from -r requirements.txt (line 5))
Collecting uwsgi==2.0.17 (from -r requirements.txt (line 6))
Collecting colorama==0.3.9 (from -r requirements_test.txt (line 2))
Collecting coverage==4.4.2 (from -r requirements_test.txt (line 3))
Collecting django-nose==1.4.5 (from -r requirements_test.txt (line 4))
Collecting nose==1.3.7 (from -r requirements_test.txt (line 5))
Collecting pinocchio==0.4.2 (from -r requirements_test.txt (line 6))
Collecting protobuf>=3.0.0 (from mysql-connector-python==8.0.11->-r requirements.txt (line 4))
Requirement already satisfied: setuptools in /usr/lib/python3.7/site-packages (from protobuf>=3.0.0->mysql-connector-python==8.0.11->-r requirements.txt (line 4)) (40.8.0)
Collecting six>=1.9 (from protobuf>=3.0.0->mysql-connector-python==8.0.11->-r requirements.txt (line 4))
Installing collected packages: pytz, Django, django-cors-headers, djangorestframework, six, protobuf, mysql-connector-python, uwsgi, colorama, coverage, nose, django-nose, pinocchio
Successfully installed Django-2.0 colorama-0.3.9 coverage-4.4.2 django-cors-headers-2.1.0 django-nose-1.4.5 djangorestframework-3.7.3 mysql-connector-python-8.0.11 nose-1.3.7 pinocchio-0.4.2 protobuf-3.9.2 pytz-2017.3 six-1.12.0 uwsgi-2.0.17
Removing intermediate container 0de7ae835571
---> c022e3d3da4a
Step 10/12 : COPY /src /app
---> aa2ad1c8f9c5
Step 11/12 : WORKDIR /app
---> Running in 092181708ed9
Removing intermediate container 092181708ed9
---> 1cc0221680b2
Step 12/12 : CMD ["python3", "manage.py", "test", "--noinput", "--settings=todobackend.settings_test"]
---> Running in 38790c33be61
Removing intermediate container 38790c33be61
---> 68f0a1a36fb4
Successfully built 68f0a1a36fb4
Successfully tagged todobackend-test:latest
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$
#&&&___________________________________________________________________________________________________________
##@@ run test on todobackend-test image
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ docker run -it --rm todobackend-test
nosetests --verbosity=2 --nologcapture --with-coverage --cover-package=todo --with-spec --spec-color --with-xunit --xunit-file=./unittests.xml --cover-xml --cover-xml-file=./coverage.xml
Creating test database for alias 'default'...

Ensure we can create a new todo item
- item has correct title
- item was created
- received 201 created status code
- received location header hyperlink

Ensure we can delete all todo items
- all items were deleted
- received 204 no content status code

Ensure we can delete a todo item
- received 204 no content status code
- the item was deleted

Ensure we can update an existing todo item using PATCH
- item was updated
- received 200 ok status code

Ensure we can update an existing todo item using PUT
- item was updated
- received 200 created status code

----------------------------------------------------------------------
XML: /app/unittests.xml
Name                              Stmts   Miss  Cover
-----------------------------------------------------
todo/__init__.py                      0      0   100%
todo/admin.py                         1      1     0%
todo/migrations/0001_initial.py       5      0   100%
todo/migrations/__init__.py           0      0   100%
todo/models.py                        6      6     0%
todo/serializers.py                   7      0   100%
todo/urls.py                          6      0   100%
todo/views.py                        17      0   100%
-----------------------------------------------------
TOTAL                                42      7    83%
----------------------------------------------------------------------
Ran 12 tests in 0.150s

OK

Destroying test database for alias 'default'...
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$

#@@ build release image _______________________________________________________________
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ docker build -t todobackend-release .
Sending build context to Docker daemon  40.45kB
Step 1/25 : FROM alpine AS test
---> 961769676411
Step 2/25 : LABEL application=todobackend
---> Using cache
---> 27c350f22511
Step 3/25 : RUN apk add --no-cache bash git
---> Using cache
---> 8071d5389dae
Step 4/25 : RUN apk add --no-cache gcc python3-dev libffi-dev musl-dev linux-headers mariadb-dev
---> Using cache
---> b8511ea6066f
Step 5/25 : RUN pip3 install wheel -U
---> Using cache
---> 85d760de343f
Step 6/25 : COPY /src/requirements* /build/
---> Using cache
---> 9f47a6a226bb
Step 7/25 : WORKDIR /build
---> Using cache
---> 2ffc2795ccef
Step 8/25 : RUN pip3 wheel -r requirements_test.txt --no-cache-dir --no-input
---> Using cache
---> d67d27b9a2ab
Step 9/25 : RUN pip3 install -r requirements_test.txt -f /build --no-index --no-cache-dir
---> Using cache
---> c022e3d3da4a
Step 10/25 : COPY /src /app
---> Using cache
---> aa2ad1c8f9c5
Step 11/25 : WORKDIR /app
---> Using cache
---> 1cc0221680b2
Step 12/25 : CMD ["python3", "manage.py", "test", "--noinput", "--settings=todobackend.settings_test"]
---> Using cache
---> 68f0a1a36fb4
Step 13/25 : FROM alpine
---> 961769676411
Step 14/25 : LABEL application=todobackend
---> Using cache
---> 27c350f22511
Step 15/25 : RUN apk add --no-cache python3 mariadb-client bash curl bats jq
---> Running in 86abd9acfb80
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz
(1/23) Installing ncurses-terminfo-base (6.1_p20190518-r0)
(2/23) Installing ncurses-terminfo (6.1_p20190518-r0)
(3/23) Installing ncurses-libs (6.1_p20190518-r0)
(4/23) Installing readline (8.0.0-r0)
(5/23) Installing bash (5.0.0-r0)
Executing bash-5.0.0-r0.post-install
(6/23) Installing bats (1.1.0-r0)
(7/23) Installing ca-certificates (20190108-r0)
(8/23) Installing nghttp2-libs (1.39.2-r0)
(9/23) Installing libcurl (7.66.0-r0)
(10/23) Installing curl (7.66.0-r0)
(11/23) Installing oniguruma (6.9.2-r0)
(12/23) Installing jq (1.6-r0)
(13/23) Installing mariadb-common (10.3.17-r0)
(14/23) Installing libgcc (8.3.0-r0)
(15/23) Installing libstdc++ (8.3.0-r0)
(16/23) Installing mariadb-client (10.3.17-r0)
(17/23) Installing libbz2 (1.0.6-r7)
(18/23) Installing expat (2.2.8-r0)
(19/23) Installing libffi (3.2.1-r6)
(20/23) Installing gdbm (1.13-r1)
(21/23) Installing xz-libs (5.2.4-r0)
(22/23) Installing sqlite-libs (3.28.0-r0)
(23/23) Installing python3 (3.7.3-r0)
Executing busybox-1.30.1-r2.trigger
Executing ca-certificates-20190108-r0.trigger
OK: 104 MiB in 37 packages
Removing intermediate container 86abd9acfb80
---> 4ad25a550090
Step 16/25 : RUN addgroup -g 1000 app &&     adduser -u 1000 -G app -D app
---> Running in bd0c1dcbe6ac
Removing intermediate container bd0c1dcbe6ac
---> a23d33309581
Step 17/25 : COPY --from=test --chown=app:app /build /build
---> 88437dd6c492
Step 18/25 : COPY --from=test --chown=app:app /app /app
---> dcabad87c48c
Step 19/25 : RUN pip3 install -r /build/requirements.txt -f /build --no-index --no-cache-dir
---> Running in 3641550621c2
Looking in links: /build
Collecting Django==2.0 (from -r /build/requirements.txt (line 1))
Collecting django-cors-headers==2.1.0 (from -r /build/requirements.txt (line 2))
Collecting djangorestframework==3.7.3 (from -r /build/requirements.txt (line 3))
Collecting mysql-connector-python==8.0.11 (from -r /build/requirements.txt (line 4))
Collecting pytz==2017.3 (from -r /build/requirements.txt (line 5))
Collecting uwsgi==2.0.17 (from -r /build/requirements.txt (line 6))
Collecting protobuf>=3.0.0 (from mysql-connector-python==8.0.11->-r /build/requirements.txt (line 4))
Requirement already satisfied: setuptools in /usr/lib/python3.7/site-packages (from protobuf>=3.0.0->mysql-connector-python==8.0.11->-r /build/requirements.txt (line 4)) (40.8.0)
Collecting six>=1.9 (from protobuf>=3.0.0->mysql-connector-python==8.0.11->-r /build/requirements.txt (line 4))
Installing collected packages: pytz, Django, django-cors-headers, djangorestframework, six, protobuf, mysql-connector-python, uwsgi
Successfully installed Django-2.0 django-cors-headers-2.1.0 djangorestframework-3.7.3 mysql-connector-python-8.0.11 protobuf-3.9.2 pytz-2017.3 six-1.12.0 uwsgi-2.0.17
Removing intermediate container 3641550621c2
---> fb0d00cc4dbc
Step 20/25 : RUN rm -rf /build
---> Running in b92dc70d7ff4
Removing intermediate container b92dc70d7ff4
---> f6230fbb1d80
Step 21/25 : RUN mkdir /public
---> Running in b8f7525de004
Removing intermediate container b8f7525de004
---> 13799cffc165
Step 22/25 : RUN chown app:app /public
---> Running in 9bf49e2f29d2
Removing intermediate container 9bf49e2f29d2
---> 1255c2c5e90a
Step 23/25 : VOLUME /public
---> Running in 893bd23433c7
Removing intermediate container 893bd23433c7
---> b15544f0d2b4
Step 24/25 : WORKDIR /app
---> Running in e5247b60d79f
Removing intermediate container e5247b60d79f
---> 27b6cddd37d5
Step 25/25 : USER app
---> Running in bfd0e5f475b3
Removing intermediate container bfd0e5f475b3
---> e4fe8afea64d
Successfully built e4fe8afea64d
Successfully tagged todobackend-release:latest
#@@ Run release_image (application) _______________________________________________________________

ssqa@ssqa:~/Documents/Docker_AWS/proj_2.1/todobackend$ docker run -it --rm  -p 8000:8000 todobackend-release uwsgi --http=0.0.0.0:8000 --module=todobackend.wsgi
--master
*** Starting uWSGI 2.0.17 (64bit) on [Tue Oct  1 21:30:21 2019] ***
compiled with version: 8.3.0 on 30 September 2019 23:05:48
os: Linux-5.0.0-27-generic #28~18.04.1-Ubuntu SMP Thu Aug 22 03:00:32 UTC 2019
nodename: eb2274bc0758
machine: x86_64
clock source: unix
detected number of CPU cores: 4
current working directory: /app
detected binary path: /usr/bin/uwsgi
!!! no internal routing support, rebuild with pcre support !!!
your memory page size is 4096 bytes
detected max file descriptor number: 1048576
lock engine: pthread robust mutexes
thunder lock: disabled (you can enable it with --thunder-lock)
uWSGI http bound on 0.0.0.0:8000 fd 4
uwsgi socket 0 bound to TCP address 127.0.0.1:33399 (port auto-assigned) fd 3
Python version: 3.7.3 (default, May  3 2019, 11:24:39)  [GCC 8.3.0]
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0x55f4aa08b500
your server socket listen backlog is limited to 100 connections
your mercy for graceful operations on workers is 60 seconds
mapped 145840 bytes (142 KB) for 1 cores
*** Operational MODE: single process ***
WSGI app 0 (mountpoint='') ready in 1 seconds on interpreter 0x55f4aa08b500 pid: 1 (default app)
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 1)
spawned uWSGI worker 1 (pid: 7, cores: 1)
spawned uWSGI http 1 (pid: 8)

## @@ docker-compose
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose up release
Starting todobackend_release_1 ... done
Attaching to todobackend_release_1
release_1  | *** Starting uWSGI 2.0.17 (64bit) on [Wed Oct  2 00:01:20 2019] ***
release_1  | compiled with version: 8.3.0 on 01 October 2019 23:51:28
release_1  | os: Linux-5.0.0-27-generic #28~18.04.1-Ubuntu SMP Thu Aug 22 03:00:32 UTC 2019
release_1  | nodename: da5de5b3dae8
release_1  | machine: x86_64
release_1  | clock source: unix
release_1  | detected number of CPU cores: 4
release_1  | current working directory: /app
release_1  | detected binary path: /usr/bin/uwsgi
release_1  | !!! no internal routing support, rebuild with pcre support !!!
release_1  | your memory page size is 4096 bytes
release_1  | detected max file descriptor number: 1048576
release_1  | lock engine: pthread robust mutexes
release_1  | thunder lock: disabled (you can enable it with --thunder-lock)
release_1  | uWSGI http bound on 0.0.0.0:8000 fd 4
release_1  | uwsgi socket 0 bound to TCP address 127.0.0.1:39521 (port auto-assigned) fd 3
release_1  | Python version: 3.7.3 (default, May  3 2019, 11:24:39)  [GCC 8.3.0]
release_1  | *** Python threads support is disabled. You can enable it with --enable-threads ***
release_1  | Python main interpreter initialized at 0x55770a5f54c0
release_1  | your server socket listen backlog is limited to 100 connections
release_1  | your mercy for graceful operations on workers is 60 seconds
release_1  | mapped 145840 bytes (142 KB) for 1 cores
release_1  | *** Operational MODE: single process ***
release_1  | WSGI app 0 (mountpoint='') ready in 1 seconds on interpreter 0x55770a5f54c0 pid: 1 (default app)
release_1  | *** uWSGI is running in multiple interpreter mode ***
release_1  | spawned uWSGI master process (pid: 1)
release_1  | spawned uWSGI worker 1 (pid: 6, cores: 1)
release_1  | spawned uWSGI http 1 (pid: 7)

## @@ docker-compose build test
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose build test

## @@ docker-compose run test
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose run test
nosetests --verbosity=2 --nologcapture --with-coverage --cover-package=todo --with-spec --spec-color --with-xunit --xunit-file=./unittests.xml --cover-xml --cover-xml-file=./coverage.xml
Creating test database for alias 'default'...

Ensure we can create a new todo item
- item has correct title
- item was created
- received 201 created status code
- received location header hyperlink

Ensure we can delete all todo items
- all items were deleted
- received 204 no content status code

Ensure we can delete a todo item
- received 204 no content status code
- the item was deleted

Ensure we can update an existing todo item using PATCH
- item was updated
- received 200 ok status code

Ensure we can update an existing todo item using PUT
- item was updated
- received 200 created status code

----------------------------------------------------------------------
XML: /app/unittests.xml
Name                              Stmts   Miss  Cover
-----------------------------------------------------
todo/__init__.py                      0      0   100%
todo/admin.py                         1      1     0%
todo/migrations/0001_initial.py       5      0   100%
todo/migrations/__init__.py           0      0   100%
todo/models.py                        6      6     0%
todo/serializers.py                   7      0   100%
todo/urls.py                          6      0   100%
todo/views.py                        17      0   100%
-----------------------------------------------------
TOTAL                                42      7    83%
----------------------------------------------------------------------
Ran 12 tests in 0.148s

OK

Destroying test database for alias 'default'...
##
## docker-compose up release

## docker-compose down -v

## ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose run release python3 manage.py migrate

# ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose up migrate
todobackend_db_1 is up-to-date
Recreating todobackend_migrate_1 ... done
Attaching to todobackend_migrate_1
migrate_1  | Operations to perform:
migrate_1  |   Apply all migrations: admin, auth, contenttypes, sessions, todo
migrate_1  | Running migrations:
migrate_1  |   Applying contenttypes.0001_initial... OK
migrate_1  |   Applying auth.0001_initial... OK
migrate_1  |   Applying admin.0001_initial... OK
migrate_1  |   Applying admin.0002_logentry_remove_auto_add... OK
migrate_1  |   Applying contenttypes.0002_remove_content_type_name... OK
migrate_1  |   Applying auth.0002_alter_permission_name_max_length... OK
migrate_1  |   Applying auth.0003_alter_user_email_max_length... OK
migrate_1  |   Applying auth.0004_alter_user_username_opts... OK
migrate_1  |   Applying auth.0005_alter_user_last_login_null... OK
migrate_1  |   Applying auth.0006_require_contenttypes_0002... OK
migrate_1  |   Applying auth.0007_alter_validators_add_error_messages... OK
migrate_1  |   Applying auth.0008_alter_user_username_max_length... OK
migrate_1  |   Applying auth.0009_alter_user_last_name_max_length... OK
migrate_1  |   Applying sessions.0001_initial... OK
migrate_1  |   Applying todo.0001_initial... OK
todobackend_migrate_1 exited with code 0

#_____________________________________________________________________________________
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose up app
Building app
Step 1/25 : FROM alpine AS test
---> 961769676411
Step 2/25 : LABEL application=todobackend
---> Using cache
---> 27c350f22511
Step 3/25 : RUN apk add --no-cache bash git
---> Using cache
---> 8071d5389dae
Step 4/25 : RUN apk add --no-cache gcc python3-dev libffi-dev musl-dev linux-headers mariadb-dev
---> Using cache
---> b8511ea6066f
Step 5/25 : RUN pip3 install wheel -U
---> Using cache
---> 85d760de343f
Step 6/25 : COPY /src/requirements* /build/
---> Using cache
---> a00c369026fd
Step 7/25 : WORKDIR /build
---> Using cache
---> a43debfe1d6d
Step 8/25 : RUN pip3 wheel -r requirements_test.txt --no-cache-dir --no-input
---> Using cache
---> c5cbfb746765
Step 9/25 : RUN pip3 install -r requirements_test.txt -f /build --no-index --no-cache-dir
---> Using cache
---> 07b2d756b724
Step 10/25 : COPY /src /app
---> Using cache
---> e5f3ef3cbac4
Step 11/25 : WORKDIR /app
---> Using cache
---> 2d03f89e0124
Step 12/25 : CMD ["python3", "manage.py", "test", "--noinput", "--settings=todobackend.settings_test"]
---> Using cache
---> b158ab6f817c

Step 13/25 : FROM alpine
---> 961769676411
Step 14/25 : LABEL application=todobackend
---> Using cache
---> 27c350f22511
Step 15/25 : RUN apk add --no-cache python3 mariadb-client bash curl bats jq
---> Using cache
---> 4ad25a550090
Step 16/25 : RUN addgroup -g 1000 app &&     adduser -u 1000 -G app -D app
---> Using cache
---> a23d33309581
Step 17/25 : COPY --from=test --chown=app:app /build /build
---> Using cache
---> 462675485986
Step 18/25 : COPY --from=test --chown=app:app /app /app
---> Using cache
---> 2f3d64e2c304
Step 19/25 : RUN pip3 install -r /build/requirements.txt -f /build --no-index --no-cache-dir
---> Using cache
---> b6e3d425d8b1
Step 20/25 : RUN rm -rf /build
---> Using cache
---> 4beff7acfa3a
Step 21/25 : RUN mkdir /public
---> Using cache
---> f4fa71123ed1
Step 22/25 : RUN chown app:app /public
---> Using cache
---> 048c565df9a8
Step 23/25 : VOLUME /public
---> Using cache
---> 17d72cbf540a
Step 24/25 : WORKDIR /app
---> Using cache
---> 8ec17bae6d29
Step 25/25 : USER app
---> Using cache
---> 0119b88f7d85

Successfully built 0119b88f7d85
Successfully tagged todobackend_app:latest
WARNING: Image for service app was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
todobackend_db_1 is up-to-date
Creating todobackend_app_1 ... done
Attaching to todobackend_app_1
app_1      | *** Starting uWSGI 2.0.17 (64bit) on [Wed Oct  2 20:41:30 2019] ***
app_1      | compiled with version: 8.3.0 on 01 October 2019 23:51:28
app_1      | os: Linux-5.0.0-27-generic #28~18.04.1-Ubuntu SMP Thu Aug 22 03:00:32 UTC 2019
app_1      | nodename: f93ac33c406a
app_1      | machine: x86_64
app_1      | clock source: unix
app_1      | detected number of CPU cores: 4
app_1      | current working directory: /app
app_1      | detected binary path: /usr/bin/uwsgi
app_1      | !!! no internal routing support, rebuild with pcre support !!!
app_1      | your memory page size is 4096 bytes
app_1      | detected max file descriptor number: 1048576
app_1      | lock engine: pthread robust mutexes
app_1      | thunder lock: disabled (you can enable it with --thunder-lock)
app_1      | uWSGI http bound on 0.0.0.0:8000 fd 4
app_1      | uwsgi socket 0 bound to TCP address 127.0.0.1:38743 (port auto-assigned) fd 3
app_1      | Python version: 3.7.3 (default, May  3 2019, 11:24:39)  [GCC 8.3.0]
app_1      | *** Python threads support is disabled. You can enable it with --enable-threads ***
app_1      | Python main interpreter initialized at 0x55dd4f2bd600
app_1      | your server socket listen backlog is limited to 100 connections
app_1      | your mercy for graceful operations on workers is 60 seconds
app_1      | mapped 145840 bytes (142 KB) for 1 cores
app_1      | *** Operational MODE: single process ***
app_1      | WSGI app 0 (mountpoint='') ready in 1 seconds on interpreter 0x55dd4f2bd600 pid: 1 (default app)
app_1      | *** uWSGI is running in multiple interpreter mode ***
app_1      | spawned uWSGI master process (pid: 1)
app_1      | spawned uWSGI worker 1 (pid: 6, cores: 1)
app_1      | spawned uWSGI http 1 (pid: 7)

##
http://localhost:8000/static
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose up migrate

ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose run app python3 manage.py collectstatic --no-input
##

Starting todobackend_db_1 ... done
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/fonts/Roboto-Bold-webfont.woff'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/fonts/Roboto-Light-webfont.woff'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/fonts/LICENSE.txt'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/fonts/README.txt'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/fonts/Roboto-Regular-webfont.woff'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-changelink.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/tooltag-add.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-calendar.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-unknown-alt.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/LICENSE'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/calendar-icons.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-unknown.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/search.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/tooltag-arrowright.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-yes.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/README.txt'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/sorting-icons.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/inline-delete.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-alert.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-deletelink.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-clock.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-no.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/selector-icons.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/icon-addlink.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/gis/move_vertex_off.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/img/gis/move_vertex_on.svg'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/dashboard.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/login.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/forms.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/fonts.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/base.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/widgets.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/changelists.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/responsive_rtl.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/responsive.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/rtl.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/autocomplete.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/vendor/select2/select2.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/vendor/select2/LICENSE-SELECT2.md'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/css/vendor/select2/select2.min.css'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/collapse.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/cancel.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/inlines.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/collapse.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/change_form.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/prepopulate_init.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/inlines.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/autocomplete.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/urlify.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/prepopulate.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/timeparse.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/calendar.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/SelectBox.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/prepopulate.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/jquery.init.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/core.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/actions.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/actions.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/popup_response.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/SelectFilter2.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/xregexp/xregexp.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/xregexp/LICENSE-XREGEXP.txt'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/xregexp/xregexp.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/jquery/jquery.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/jquery/LICENSE-JQUERY.txt'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/jquery/jquery.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/select2.full.min.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/select2.full.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/LICENSE-SELECT2.md'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/th.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ar.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/zh-TW.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/km.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/id.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/fr.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ja.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/gl.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/lt.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/eu.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/lv.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ko.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/pl.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/es.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ro.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/bg.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ca.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/sr-Cyrl.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/pt-BR.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/it.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/fa.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/he.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/cs.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/en.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/vi.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/is.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/sk.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/uk.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/et.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/sv.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/hu.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/tr.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/hi.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ru.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/pt.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/nl.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/zh-CN.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/hr.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/de.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/ms.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/el.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/nb.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/sr.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/da.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/az.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/mk.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/vendor/select2/i18n/fi.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/admin/RelatedObjectLookups.js'
Copying '/usr/lib/python3.7/site-packages/django/contrib/admin/static/admin/js/admin/DateTimeShortcuts.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/fonts/glyphicons-halflings-regular.woff'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/fonts/glyphicons-halflings-regular.woff2'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/fonts/glyphicons-halflings-regular.svg'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/fonts/glyphicons-halflings-regular.ttf'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/fonts/glyphicons-halflings-regular.eot'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/img/glyphicons-halflings.png'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/img/glyphicons-halflings-white.png'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/img/grid.png'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/css/prettify.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/css/bootstrap.min.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/css/bootstrap-tweaks.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/css/default.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/glyphicons-halflings-regular.woff'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/fontawesome-webfont.woff'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/glyphicons-halflings-regular.woff2'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/fontawesome-webfont.eot'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/fontawesome-webfont.ttf'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/glyphicons-halflings-regular.svg'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/fontawesome-webfont.svg'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/glyphicons-halflings-regular.ttf'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/fonts/glyphicons-halflings-regular.eot'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/img/favicon.ico'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/img/grid.png'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/css/bootstrap-theme.min.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/css/jquery.json-view.min.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/css/base.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/css/bootstrap.min.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/css/highlight.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/css/font-awesome-4.0.3.css'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/js/api.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/js/bootstrap.min.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/js/jquery.json-view.min.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/js/jquery-1.10.2.min.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/docs/js/highlight.pack.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/csrf.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/bootstrap.min.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/jquery-1.12.4.min.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/default.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/prettify-min.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/coreapi-0.1.1.js'
Copying '/usr/lib/python3.7/site-packages/rest_framework/static/rest_framework/js/ajax-form.js'

159 static files copied to '/public/static'.

##
> docker-compose down -v
...
...
> docker-compose build
...
...
> docker-compose up migrate
...
...
> docker-compose run app python3 manage.py collectstatic --no-input
...
...
> docker-compose up acceptance

##
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$ docker-compose up acceptance
todobackend_db_1 is up-to-date
Recreating todobackend_app_1 ... done
Creating todobackend_acceptance_1 ... done
Attaching to todobackend_acceptance_1
acceptance_1  | 1..4
acceptance_1  | ok 1 todobackend root
acceptance_1  | ok 2 todo items returns empty list
acceptance_1  | not ok 3 create todo item
acceptance_1  | # (in test file acceptance.bats, line 24)
acceptance_1  | #   `[ $(curl ${BASH_REMATCH[1]} | jq '.title') = $(echo "$item" | jq '.title') ]' failed with status 2
acceptance_1  | #   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
acceptance_1  | #                                  Dload  Upload   Total   Spent    Left  Speed
0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
acceptance_1  | #   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
acceptance_1  | #                                  Dload  Upload   Total   Spent    Left  Speed
100    84  100    84    0     0   2400      0 --:--:-- --:--:-- --:--:--  2400
acceptance_1  | # /tmp/bats.1.src: line 24: [: too many arguments
acceptance_1  | ok 4 delete todo item
todobackend_acceptance_1 exited with code 1
ssqa@ssqa:~/Documents/Docker_AWS/proj_2.2/todobackend$

##
curl -X POST localhost:8000/api/ -H "Content-Type: application/json" -d '{"title": 4378, "content": "Station Setup"}'

curl -X PUT localhost:8000/api/1/ -H "Content-Type: application/json" -d '{"title": 4389, "content": "Station Setup"}'

curl -X PATCH localhost:8000/api/2/ -H "Content-Type: application/json" -d '{"title": 4378}'