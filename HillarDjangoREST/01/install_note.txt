#1. Create venv @ \HillarDjangoREST\01, not need to create separate folder, . is important
C:\Users\jsun\Documents\Py_projects>python -m venv .\HillarDjangoREST\01

#2. Before installing any third party package
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01>pip list
Package    Version
---------- -------
pip        18.1
setuptools 40.6.2
You are using pip version 18.1, however version 19.1.1 is available.
You should consider upgrading via the 'python -m pip install --upgrade pip' command.

#3. Install Django
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01>pip install django==1.11.5

#4 Install Django REST framework
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01>pip install djangorestframework==3.6.4

#5 Create a Ddjango project
python Scripts\django-admin.exe startproject restful01

#6 create a new Django app
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>python manage.py startapp toys

#7. install curl
#8 install HTTPie
pip install --upgrade httpie
#9. install postman
#10 install Stoplight



#url
http://localhost:8000/toys/
http://localhost:8000/toys/5

#11.1 Create first model: 
/01/restful01/toys/models.py
#11.2 First migrations
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>python manage.py makemigrations toys
Migrations for 'toys':
  toys\migrations\0001_initial.py
    - Create model Toy
#11.2 Apply Migration
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, sessions, toys
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying sessions.0001_initial... OK
  Applying toys.0001_initial... OK
#11.3 Download sqlite3.exe command-line utility
#11.4 check database
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>sqlite3 db.sqlite3 ".tables"
auth_group                  django_admin_log
auth_group_permissions      django_content_type
auth_permission             django_migrations
auth_user                   django_session
auth_user_groups            toys_toy
auth_user_user_permissions
#sqlite3 query
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>sqlite3 db.sqlite3 "SELECT * FROM toys_toy ORDER BY name;"
#
sqlite3 db.sqlite3 ".schema toys_toy"

CREATE TABLE IF NOT EXISTS "toys_toy" 
    (
        "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT,
        "created" datetime NOT NULL, 
        "name" varchar(150) NOT NULL, 
        "description" varchar(250) NOT NULL, 
        "toy_category" varchar(200) NOT NULL, 
        "release_date" datetime NOT NULL, 
        "was_included_in_home" bool NOT NULL
    );
# python interactive shell
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>python manage.py shell
Python 3.7.2 (tags/v3.7.2:9a3ffc0492, Dec 23 2018, 22:20:52) [MSC v.1916 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)

>>> from datetime import datetime
>>> from django.utils import timezone
>>> from django.utils.six import BytesIO
>>> from rest_framework.renderers import JSONRenderer
>>> from rest_framework.parsers import JSONParser
>>> from toys.models import Toy
>>> from toys.serializers import ToySerializer
>>> toy_release_date = timezone.make_aware(datetime.now(), timezone.get_current_timezone())
>>> toy1 = Toy(name='Snoopy talking action figure', description='Snoopy speaks five languages', release_date=toy_release_date, toy_category='Action figures', was_included_in_home=False)
>>> toy1.save()
>>> toy2 = Toy(name='Hawaiian Barbie', description='Barbie loves Hawaii', release_date=toy_release_date, toy_category='Dolls', was_included_in_home=True)
>>> toy2.save()

#12. Start Server
#python manage.py runserver 0.0.0.0:8000
#192.168.2.103:8000
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>python manage.py runserver
Performing system checks...

System check identified no issues (0 silenced).
May 16, 2019 - 10:31:58
Django version 1.11.17, using settings 'restful01.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.

#13. HTTP request through curl: GET localhost:8000/toys/
C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>curl X GET localhost:8000/toys/
curl: (6) Could not resolve host: X
curl: (6) Could not resolve host: GET
[{"pk":3,"name":"Clash Royale play set","description":"6 figures from Clash Royale","release_date":"2017-10-09T12:1
                                   0:00.776594Z","toy_category":"Playset","was_included_in_home":false},{"pk":2,"name":"Hawaiian Barbie","description"                                   :"Barbie loves Hawaii","release_date":"2019-05-14T17:42:13.029376Z","toy_category":"Dolls","was_included_in_home":t                                   rue},{"pk":1,"name":"Snoopy talking action figure","description":"Snoopy speaks five languages","release_date":"201                                   9-05-14T17:42:13.029376Z","toy_category":"Action figures","was_included_in_home":false}]

# i option to show HTTP header
C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>curl -iX GET localhost:8000/toys/
HTTP/1.0 200 OK
Date: Thu, 16 May 2019 18:30:53 GMT
Server: WSGIServer/0.2 CPython/3.7.2
Content-Type: application/json
X-Frame-Options: SAMEORIGIN
Content-Length: 548

[{"pk":3,"name":"Clash Royale play set","description":"6 figures from Clash Royale","release_date":"2017-10-09T12:10:00.776594Z","toy_category":"Playset","was_included_in_home":false},{"pk":2,"name":"Hawaiian Barbie","description":"Barbie loves Hawaii","release_date":"2019-05-14T17:42:13.029376Z","toy_category":"Dolls","was_included_in_home":true},{"pk":1,"name":"Snoopy talking action figure","description":"Snoopy speaks five languages","release_date":"2019-05-14T17:42:13.029376Z","toy_category":"Action figures","was_included_in_home":false}]

#14. Use HTTPie utility
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http localhost:8000/toys/
HTTP/1.0 200 OK
Content-Length: 548
Content-Type: application/json
Date: Thu, 16 May 2019 19:00:41 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

[
    {
        "description": "6 figures from Clash Royale",
        "name": "Clash Royale play set",
        "pk": 3,
        "release_date": "2017-10-09T12:10:00.776594Z",
        "toy_category": "Playset",
        "was_included_in_home": false
    },
    {
        "description": "Barbie loves Hawaii",
        "name": "Hawaiian Barbie",
        "pk": 2,
        "release_date": "2019-05-14T17:42:13.029376Z",
        "toy_category": "Dolls",
        "was_included_in_home": true
    },
    {
        "description": "Snoopy speaks five languages",
        "name": "Snoopy talking action figure",
        "pk": 1,
        "release_date": "2019-05-14T17:42:13.029376Z",
        "toy_category": "Action figures",
        "was_included_in_home": false
    }
]
## ignore header with -b option
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http  -b :8000/toys/
[
    {
        "description": "6 figures from Clash Royale",
        "name": "Clash Royale play set",
        "pk": 3,
        "release_date": "2017-10-09T12:10:00.776594Z",
        "toy_category": "Playset",
        "was_included_in_home": false
    },
    {
        "description": "Barbie loves Hawaii",
        "name": "Hawaiian Barbie",
        "pk": 2,
        "release_date": "2019-05-14T17:42:13.029376Z",
        "toy_category": "Dolls",
        "was_included_in_home": true
    },
    {
        "description": "Snoopy speaks five languages",
        "name": "Snoopy talking action figure",
        "pk": 1,
        "release_date": "2019-05-14T17:42:13.029376Z",
        "toy_category": "Action figures",
        "was_included_in_home": false
    }
]

## GET http://localhost:8000/toys/3
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http :8000/toys/3
HTTP/1.0 200 OK
Content-Length: 182
Content-Type: application/json
Date: Thu, 16 May 2019 19:15:56 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

{
    "description": "6 figures from Clash Royale",
    "name": "Clash Royale play set",
    "pk": 3,
    "release_date": "2017-10-09T12:10:00.776594Z",
    "toy_category": "Playset",
    "was_included_in_home": false
}
## curl
C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>curl -iX GET localhost:8000/toys/3
HTTP/1.0 200 OK
Date: Thu, 16 May 2019 19:18:36 GMT
Server: WSGIServer/0.2 CPython/3.7.2
Content-Type: application/json
X-Frame-Options: SAMEORIGIN
Content-Length: 182

{"pk":3,"name":"Clash Royale play set","description":"6 figures from Clash Royale","release_date":"2017-10-09T12:10:00.776594Z","toy_category":"Playset","was_included_in_home":false}

##
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http :8000/toys/90
HTTP/1.0 404 Not Found
Content-Length: 0
Content-Type: text/html; charset=utf-8
Date: Thu, 16 May 2019 19:40:35 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

## POST command

http POST :8000/toys/ name="PvZ 2 puzzle" description="Plants vs Zombies 2 puzzle" toy_category="Puzzle" was_included_in_home=false  release_date="2017-10-08T01:01:00.776594Z"
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http POST :8000/toys/ name="PvZ 2 puzzle" description="Plants vs Zombies 2 puzzle" toy_category="Puzzle" was_included_in_home=false  release_date="2017-10-08T01:01:00.776594Z"

HTTP/1.0 201 Created
Content-Length: 171
Content-Type: application/json
Date: Thu, 16 May 2019 19:52:07 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

{
    "description": "Plants vs Zombies 2 puzzle",
    "name": "PvZ 2 puzzle",
    "pk": 4,
    "release_date": "2017-10-08T01:01:00.776594Z",
    "toy_category": "Puzzle",
    "was_included_in_home": false
}

## PUT command

(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http PUT :8000/toys/4 name="PvZ 3 puzzle" description="Plants vs Zombies 3 puzzle" toy_category="Puzzles & Games" was_included_in_home=false release_date="2017-10-08T01:01:00.776594Z"
HTTP/1.0 200 OK
Content-Length: 180
Content-Type: application/json
Date: Thu, 16 May 2019 21:47:11 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

{
    "description": "Plants vs Zombies 3 puzzle",
    "name": "PvZ 3 puzzle",
    "pk": 4,
    "release_date": "2017-10-08T01:01:00.776594Z",
    "toy_category": "Puzzles & Games",
    "was_included_in_home": false
}
 
##As we didn't provide all the required values for a Toy instance, the toy_serializer.is_valid() method will return False 
and the function will return an HTTP 400 Bad Request status code
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http PUT :8000/toys/4 name="PvZ 4 puzzle"
HTTP/1.0 400 Bad Request
Content-Length: 129
Content-Type: application/json
Date: Thu, 16 May 2019 22:02:23 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

{
    "description": [
        "This field is required."
    ],
    "release_date": [
        "This field is required."
    ],
    "toy_category": [
        "This field is required."
    ]
}
##
When we want our API to be able to update a single field for an existing resource, in this case, an existing toy, 
we should provide an implementation for the PATCH method. The PUT method is meant to replace an entire resource 
and the PATCH method is meant to apply a delta to an existing resource. 

## DELETE command
(01) C:\Users\jsun\Documents\Py_projects\HillarDjangoREST\01\restful01>http DELETE :8000/toys/4
HTTP/1.0 204 No Content
Content-Length: 0
Content-Type: text/html; charset=utf-8
Date: Thu, 16 May 2019 22:16:52 GMT
Server: WSGIServer/0.2 CPython/3.7.2
X-Frame-Options: SAMEORIGIN

##
